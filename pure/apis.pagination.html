<!doctype html>
<html lang="zh-Hans-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="description" content="LuLu UI pure主题中文文档，面向PC，也兼容移动端，非常适合对外用户web网站的UI框架，阅文集团前端团队荣誉出品。本页面文档内容关于Pagination分页" />
<meta name="keywords" content="LuLu UI, 中文文档, UI框架, UI组件库, LuLu, Web, 前端, Pagination分页" />
<title>LuLu UI pure主题中文文档 &raquo; Pagination分页</title>
<link rel="stylesheet" href="https://qidian.gtimg.com/lulu/pure/css/common/animate.css">
<link rel="stylesheet" href="https://qidian.gtimg.com/lulu/pure/css/common/ui.css">
<link rel="stylesheet" href="../pure/assets/css/mockup.css">
</head>
<body>
	<input id="asideCheck" type="checkbox" class="aside-checkbox"><label for="asideCheck" class="aside-label"><svg width="24" height="24"><use xlink:href="#icon-bars"></use></svg></label>
	<header class="header">
		<a href="../" accesskey="1" class="logo-a" data-theme="pure"><h1 class="logo">LuLu UI pure版中文文档 &raquo; Pagination分页</h1></a>
		<div class="header-right">
			<select id="selectTheme" class="select-theme" is="ui-select">
				<option value="peak">Peak主题</option>
			    <option value="pure" selected>Pure主题</option>
			    <option value="edge">Edge主题</option>
			</select>
			<a href="https://github.com/yued-fe/lulu" class="fork-me ui-button">Fork Me</a>
		</div>
	</header>


<div class="main">
    <!-- 主内容 -->
    <main class="section_main">
    	<h2 class="section_title">Pagination分页</h2>
        <!-- 详细内容 -->
        <article>
            <h3>作为插件单独使用</h3>
            <p>本前端分页可以单独作为插件使用。</p>
            <p>引用下面CSS：</p>
            <pre>&lt;link rel="stylesheet" href="https://qidian.gtimg.com/lulu/pure/css/common/ui/Pagination.css"&gt;</pre>
            <p>引用下面的JS：</p>
            <pre>&lt;script src="https://qidian.gtimg.com/lulu/pure/js/common/ui/Pagination.js"&gt;&lt;/script&gt;</pre>

            <h3>分页组件自定义元素</h3>
            <h4>基本的效果和使用</h4>
            <p>无需初始化，直接使用自定义的 <code>&lt;ui-pagination&gt;</code> 元素即可。效果如下：</p>
            <ui-pagination total="100"></ui-pagination>
            <p>HTML代码如下：</p>
            <pre>&lt;ui-pagination total="100"&gt;&lt;/ui-pagination&gt;</pre>
            <p>支持 <code>total</code>，<code>current</code>，<code>per</code>，<code>mode</code>，<code>href</code> 这5个自定义参数。</p>
            <p>如果有点击事情需要处理，可以这样绑定：</p>
            <pre>var p = document.querySelector('ui-pagination');
if (p.data) {
    p.data.pagination.callback.click = function (eleClicked, current) {
        <span class="green">// this就是当前实例对象</span>
        console.log(current);
    };
}</pre>
            <p>也可以使用自定义的 change 事件处理：</p>
            <pre>p.addEventListener('change', function () {
    console.log(this.data.pagination.params.current);                
});</pre>

            <p>自定义元素是一种快捷使用方式，少部分参数功能较弱，例如 <code>href</code> 参数默认不支持 Function 类型，需要通过暴露的 <code>params</code> 对象进行重置。</p>

            <h4>其他自定义参数测试</h4>
            <ui-pagination total="100" current="5" per="10" mode="short"></ui-pagination>
            <p>代码如下：</p>
            <pre>&lt;ui-pagination total="100" current="5" per="10" mode="short"&gt;&lt;/ui-pagination&gt;</pre>


            <h4>属性值修改与同步测试</h4>
            <p>
                <button id="buttonTotal" class="ui-button" data-type="primary">修改上面两个分页的total为200</button>
            </p>
            <p>代码如下（核心部分已经高亮）：</p>
            <pre>button.addEventListener('click', function () {
    document.querySelectorAll('ui-pagination').forEach(function (elePagination) {
        <mark>elePagination.total = 200;</mark>
    });

    this.textContent = '修改成功';
    this.disabled = true;
});</pre>
            <h4>DOM 插入与渲染测试</h4>
            <p>同时测试下设置动态 href 链接地址（见代码红色高亮部分）。</p>
            <p>
                <button id="buttonInsert" class="ui-button" data-type="primary">插入一个&lt;ui-pagination&gt;分页元素</button>
            </p>

            <p>代码如下：</p>
            <pre>button.addEventListener('click', function () {
    this.parentElement.insertAdjacentHTML('afterend', '&lt;ui-pagination total="66" <mark>href="?pageid=${current}"</mark>&gt;&lt;/ui-pagination&gt;');
});</pre>

            <h3>is-pagination语法</h3>

            <p>无需初始化，直接使用 <code>is-pagination</code> 属性也可以实现分页效果。效果如下：</p>
            <div id="p0" data-total="100" data-current="5" data-per="10" is-pagination></div>
            <div data-total="100" data-current="5" data-per="10" data-mode="short" is-pagination></div>
            <p>代码示意：</p>
            <pre>&lt;div data-total="100" data-current="5" data-per="10" <mark>is-pagination</mark>&gt;&lt;/div&gt;
&lt;div data-total="100" data-current="5" data-per="10" data-mode="short" <mark>is-pagination</mark>&gt;&lt;/div&gt;</pre>

            <p>可以看到，分页数据使用 <code>data-*</code> 属性设置。</p>


            <h3>分页组件实例方法构造</h3>
            <h4>基本效果和使用</h4>
            <p>修改下面的一些数值，预览分页效果：</p>
            <p>
                总数据量：<input id="inputTotal" class="ui-input mr30" size="6" value="280">
                每页数目：<select id="inputPer">
                    <option value="15">15</option>
                    <option value="30">30</option>
                </select>
            </p>
            <div id="testPage" class="p5 bg-white" style="height: 28px;"></div>
            <div id="testPage2" class="p5 bg-white mt15" style="height: 28px;"></div>
<pre><span class="green">// 长分页</span>
new Pagination(document.querySelector('#testPage'), {
    total: eleInputTotal.value,
    per: eleInputPer.value
});

<span class="green">// 短分页</span>
new Pagination(document.querySelector('#testPage2'), {
    total: eleInputTotal.value,
    per: eleInputPer.value,
    mode: 'short'
});</pre>
            <h4>普通链接地址的分页</h4>
            <div id="testPage3" class="p5 bg-white mt15" style="height: 28px;"></div>
            <pre>new Pagination(document.querySelector('#testPage3'), {
    total: 400,
    current: 1,
    href: function (current) {
        return '?pageid=' + current;
    }
});</pre>

            <h3>语法和参数</h3>
            <pre>new Pagination(element, options);</pre>
            <p>其中：</p>
            <dl>
                <dt>element</dt>
                <dd>必需。Element元素或String字符串。显示分页的容器元素或者对应的选择器。</dd>
                <dt>options</dt>
                <dd>可选。纯Object对象。可选参数，具体见下表：</dd>
            </dl>

            <table width="100%" class="ui-table">
              <tr>
                <th scope="col" width="70">参数名称</th>
                <th scope="col" width="120">支持类型</th>
                <th scope="col" width="110">默认值</th>
                <th scope="col">释义</th>
              </tr>
              <tr>
                <td>total</td>
                <td>Number</td>
                <td>0</td>
                <td>总数据量。默认长度为0。注意，是数据条目总数，不是分页总数。</td>
              </tr>
              <tr>
                <td>current</td>
                <td>Number</td>
                <td>1</td>
                <td>当前页码数。默认是选中第1页。</td>
              </tr>
              <tr>
                <td>per</td>
                <td>Number</td>
                <td>15</td>
                <td>每页显示的条目数。</td>
              </tr>
              <tr>
                <td>mode</td>
                <td>String</td>
                <td>long</td>
                <td>分页的类别。目前支持的参数有：<code>long</code>和<code>short</code></td>
              </tr>
              <tr>
                <td>href</td>
                <td>String|<wbr>Func<wbr>tion</td>
                <td>java<wbr>script:</td>
                <td>可点击分页项的<code>href</code>值，默认是<code>javascript:</code>。
                    <p>如果值字符串值，支持<code>${current}</code>动态数据，值等同于当前点击分页的页码数。例如<code>{ href: "?query<wbr>=page<wbr>${current}<wbr>" }</code>，则生成的分页的<code>href</code>属性值会是：<wbr><code>?query<wbr>=page1</code>，<wbr><code>?query<wbr>=page2</code>，<wbr><code>?query<wbr>=page3</code>，<wbr>...</p>
                    <p>还支持Function类型，用来返回实时的<code>href</code>地址，实现传统的分页跳转效果。支持一个参数，为当前的分页页码数。</p></td>
              </tr>
              <tr>
                <td>onClick</td>
                <td>Func<wbr>tion</td>
                <td>func<wbr>tion () {}</td>
                <td>点击分页时候触发的方法。其中，默认该回调函数<code>this</code>指当前实例对象。支持两个参数，分别指代当前选中的分页元素，和当前点击分页对应的分页数。</td>
              </tr>
            </table>

            <h4>关于实例对象</h4>
            <p>假设我们有一个名为myPage的实例对象，代码为：</p>
            <pre>var myPage = new Pagination(element);</pre>
            <p>则<code>myPage</code>对象暴露了如下属性和方法：</p>
            <pre>myPage: {
    element:{
        <span class="green">// 显示的分页元素，
        // pagination和container是同一个元素</span>
        pagination: null,
        container: null
    },
    params: {
        <span class="green">// 分页一些参数</span>
        total: 0,
        current: 1,
        per: 15,
        mode: 'long',
        <span class="green">// 分页的href值</span>
        href: null
    },
    callback: {
        <span class="green">// 点击的事件回调</span>
        click: function () {}
    },
    <span class="green">// 分页HTML创建</span>
    create: function () {},
    <span class="green">// 分页更新</span>
    show: function () {},
    <span class="green">// 分页刷新</span>
    refresh: function () {}
}</pre>
            <p>另外，实例对象和分页容器元素之间有存储关系，假设容器元素是<code>element</code>，则我们实例对象可以使用下面的方法获取：</p>
            <pre>var myPage = element.data.pagination;</pre>
            <p>上面自定义<code>&lt;ui-pagination&gt;</code>元素添加<code>click</code>事件就是使用这个特性实现的。</p>

            <h4>其他说明</h4>
            <p>如果需要手动刷新分页数据，建议使用实例的 <code>refresh()</code> 方法，而不是每次都 <code>new</code> 一个新的实例，避免不必要的内存开销。</p>
            <p>在 <code>refresh()</code> 方法执行之前，我们需要改变实例的一些属性值，比方说，总数目或者每页数目，我们直接修改实例对象的属性值就可以了。</p>
            <p>例如，每页的条目数从<code>15</code>变成<code>30</code>, 则：</p>
            <pre>myPage.params.per = 30;
myPage.refresh();</pre>
            <p>如果你只想获得<strong>分页字符串</strong>，可以使用 <code>create()</code> 方法，使用举例：</p>
            <pre>var objMyPage = new Pagination(null, {
  total: 400,
  current: 1,
  per: 15
});
<span class="green">// objMyPage.create()就是分页HTML数据</span>
console.log(objMyPage.create());</pre>

            <div class="contributors">
                <svg><use xlink:href="#icon-persons"></use></svg> <h6 class="contributors-h">本页贡献者：</h6><p id="contributorsP" class="contributors-p">zhangxinxu，nanaSun</p>
            </div>
        </article>
    </main>
    <!-- 侧边栏 -->
    <!-- 侧边栏 -->
<aside id="aside" class="aside">
    <div class="aside_main">
    	<dl class="aside_dl">
        	<dt class="aside_dt">关于</dt>
            <dd><a href="./about.design.html" class="aside_nav "><i class="icon icon_nav_msg"><svg><use xlink:href="#icon-maxcdn"></use></svg></i>命名与设计</a></dd>
            <dd><a href="./about.use.html" class="aside_nav "><i class="icon icon_nav_set"><svg><use xlink:href="#icon-wrench"></use></svg></i>使用与发布</a></dd>
        </dl>
        <dl class="aside_dl">
            <dt class="aside_dt">全局</dt>
            <dd><a href="./apis.colour.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-delicious"></use></svg></i>颜色</a></dd>
        </dl>
        <dl class="aside_dl">
            <dt class="aside_dt">布局</dt>
            <dd><a href="./apis.table.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-table"></use></svg></i>Table表格</a></dd>
        </dl>
        <dl class="aside_dl">
            <dt class="aside_dt">控件</dt>
            <dd><a href="./apis.button.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-caret-square-o-right"></use></svg></i>Button按钮</a></dd>
            <dd><a href="./apis.input.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-tasks"></use></svg></i>Input文本框</a></dd>
            <dd><a href="./apis.textarea.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-square-o"></use></svg></i>Textarea文本域</a></dd>
            <dd><a href="./apis.placeholder.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-product-hunt"></use></svg></i>Placeholder占位符</a></dd>
            <dd><a href="./apis.checked.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-check-square"></use></svg></i>Radio/Checkbox框</a></dd>
            <dd><a href="./apis.switch.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-toggle-on"></use></svg></i>Switch开关</a></dd>
            <dd><a href="./apis.progress.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-ellipsis-h"></use></svg></i>Progress进度</a></dd>
        </dl>
        <div class="aside_divide"></div>
        <dl class="aside_dl">
            <dt class="aside_dt" hidden>动态控件</dt>
            <dd><a href="./apis.select.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-bars"></use></svg></i>Select下拉框</a></dd>
            <dd><a href="./apis.range.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-sliders"></use></svg></i>Range范围选择</a></dd>
            <dd><a href="./apis.color.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-eyedropper"></use></svg></i>Color颜色选择</a></dd>
            <dd><a href="./apis.datetime.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-calendar"></use></svg></i>DateTime日期选择</a></dd>
        </dl>
        <div class="aside_divide"></div>
        <dl class="aside_dl">
            <dt class="aside_dt">组件</dt>
            <dd><a href="./apis.loading.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-spinner"></use></svg></i>Loading效果</a></dd>
            <dd><a href="./apis.datalist.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-list"></use></svg></i>Datalist数据列表</a></dd>
            <dd><a href="./apis.dialog.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-external-link"></use></svg></i>Dialog弹框</a></dd>
            <dd><a href="./apis.tips.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-bell"></use></svg></i>Tips/ErrorTip提示</a></dd>
            <dd><a href="./apis.lighttip.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-bolt"></use></svg></i>LightTip轻提示</a></dd>
            <dd><a href="./apis.pagination.html" class="aside_nav active"><i class="icon icon_nav_user"><svg><use xlink:href="#icon-stack"></use></svg></i>Pagination分页</a></dd>
            <dd><a href="./apis.drop.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-dropbox"></use></svg></i>Drop等下拉</a></dd>
            <dd><a href="./apis.validate.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-check-square-o"></use></svg></i>Validate表单验证</a></dd>
            <dd><a href="./apis.tab.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-tags"></use></svg></i>Tab选项卡切换</a></dd>
        </dl>

        <dl class="aside_dl">
            <dt class="aside_dt">综合实例</dt>
            <dd><a href="./example.table.html" class="aside_nav "><i class="icon icon_nav_menu"><svg><use xlink:href="#icon-list-alt"></use></svg></i>表格解决方案</a></dd>
            <dd><a href="./example.form.html" class="aside_nav "><i class="icon icon_nav_source"><svg><use xlink:href="#icon-wpforms"></use></svg></i>表单解决方案</a></dd>
        </dl>
    </div>
</aside>
<script>(function () {
    // 记住滚动位置
    var eleAside = document.getElementById('aside');

    eleAside.addEventListener('click', function () {
        sessionStorage.asideScrollTop = this.scrollTop;
    });

    eleAside.scrollTop = sessionStorage.asideScrollTop;
    // IE这里设置可能没有用
    if (eleAside.scrollTop != sessionStorage.asideScrollTop) {
        setTimeout(function () {
            eleAside.scrollTop = sessionStorage.asideScrollTop;
        }, 1);
    }

    // 滚动条设置判断
    var div = document.createElement('div');
    div.style.width = '100px';
    div.style.height = '1px';
    div.style.overflow = 'auto';
    div.style.position = 'absolute';
    div.style.left = '-199px';
    var p = document.createElement('p');
    p.style.height = '20px';
    div.appendChild(p);
    document.body.appendChild(div);
    if (p.clientWidth != 100) {
        eleAside.className += ' scrollbar';
    }
    document.body.removeChild(div);
})();
</script>
</div>

<a href="#" id="backtop" class="backtop"></a>

<script src="https://qidian.gtimg.com/lulu/pure/js/common/polyfill.js"></script>
<script src="https://qidian.gtimg.com/lulu/pure/js/common/ui/Keyboard.js"></script>
<script src="https://qidian.gtimg.com/lulu/pure/js/common/ui/Select.js"></script>
<!-- 底部 -->
<script src="../pure/assets/js/mockup.js"></script>
</body>
</html>

<script src="https://qidian.gtimg.com/lulu/pure/js/common/ui/Select.js"></script>
<script src="https://qidian.gtimg.com/lulu/pure/js/common/ui/Pagination.js"></script>
<script>
p0.addEventListener('change', function () {
    console.log('选择分页是：', this.data.pagination.params.current);                
});

var eleInputTotal = document.querySelector('#inputTotal');
var eleInputPer = document.querySelector('#inputPer');

/** 新建分页 */
var page1 = new Pagination(document.querySelector('#testPage'), {
    total: eleInputTotal.value,
    per: eleInputPer.value
});
var page2 = new Pagination(document.querySelector('#testPage2'), {
    total: eleInputTotal.value,
    per: eleInputPer.value,
    mode: 'short'
});

// 下拉或者输入框值改变后
eleInputPer.addEventListener('change', function () {
    page2.params.per = this.value;
    page1.params.per = this.value;
    page1.show();
    page2.show();
});
eleInputTotal.addEventListener('change', function () {
    page2.params.total = this.value;
    page1.params.total = this.value;
    page1.show();
    page2.show();
});


var currentPageId = 1;
if (/pageid/.test(location.href)) {
    if (localStorage.pageScroll) {
        document.scrollingElement.scrollTop = localStorage.pageScroll;
        // 删除
        localStorage.pageScroll = null;
    }
    currentPageId = new URLSearchParams(location.search).get('pageid');
}
new Pagination(document.querySelector('#testPage3'), {
    total: 400,
    current: currentPageId,
    onClick: function () {
        localStorage.pageScroll = window.pageYOffset;
    },
    href: function (current) {
        return '?pageid=' + current;
    }
});

// 修改total属性值触发分页变化
var eleButtonTotal = document.querySelector('#buttonTotal');
eleButtonTotal.addEventListener('click', function () {
    document.querySelectorAll('ui-pagination').forEach(function (elePagination) {
        elePagination.total = 200;
    });

    this.textContent = '修改成功';
    this.disabled = true;
});

// 插入分页元素
var eleButtonInsert = document.querySelector('#buttonInsert');
eleButtonInsert.addEventListener('click', function () {
    this.parentElement.insertAdjacentHTML('afterend', '<ui-pagination total="66" href="?pageid=${current}"></ui-pagination>');
});

var elePaginationFirst = document.querySelector('ui-pagination');
if (elePaginationFirst.data) {
    elePaginationFirst.data.pagination.callback.click = function (eleClicked, current) {
        // this就是当前实例对象
        console.log(current);
    };
}
</script>
